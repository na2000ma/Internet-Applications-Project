<div class="organizo-vertical-navigation-wrapper">

  <!-- Header -->
  <div class="organizo-vertical-navigation-header">
    <ng-content select="[organizoVerticalNavigationHeader]"></ng-content>
  </div>

  <!-- Content -->
  <div
    #navigationContent
    [organizoScrollbarOptions]="{wheelPropagation: inner, suppressScrollX: true}"
    class="organizo-vertical-navigation-content"
    organizoScrollbar>

    <!-- Content header -->
    <div class="organizo-vertical-navigation-content-header">
      <ng-content select="[organizoVerticalNavigationContentHeader]"></ng-content>
    </div>

    <!-- Items -->
    @for (item of navigation; track trackByFn) {
      <ng-container>

        @if ((item.hidden && !item.hidden(item)) || !item.hidden) {
          <!-- Skip the hidden items -->
          <ng-container>

            @if (item.type === 'aside') {
              <!-- Aside -->
              <ng-container>
                <organizo-vertical-navigation-aside-item
                  (click)="toggleAside(item)"
                  [activeItemId]="activeAsideItemId"
                  [autoCollapse]="autoCollapse"
                  [item]="item"
                  [name]="name"
                  [skipChildren]="true"></organizo-vertical-navigation-aside-item>
              </ng-container>
            } @else if (item.type === 'basic') {
              <!-- Basic -->
              <ng-container>
                <organizo-vertical-navigation-basic-item
                  [item]="item"
                  [name]="name"></organizo-vertical-navigation-basic-item>
              </ng-container>
            } @else if (item.type === 'collapsable') {
              <!-- Collapsable -->
              <ng-container>
                <organizo-vertical-navigation-collapsable-item
                  [autoCollapse]="autoCollapse"
                  [item]="item"
                  [name]="name"></organizo-vertical-navigation-collapsable-item>
              </ng-container>
            } @else if (item.type === 'divider') {
              <!-- Divider -->
              <ng-container>
                <organizo-vertical-navigation-divider-item
                  [item]="item"
                  [name]="name"></organizo-vertical-navigation-divider-item>
              </ng-container>
            } @else if (item.type === 'group') {
              <!-- Group -->
              <ng-container>
                <organizo-vertical-navigation-group-item
                  [autoCollapse]="autoCollapse"
                  [item]="item"
                  [name]="name"></organizo-vertical-navigation-group-item>
              </ng-container>
            } @else if (item.type === 'spacer') {
              <!-- Spacer -->
              <ng-container>
                <organizo-vertical-navigation-spacer-item
                  [item]="item"
                  [name]="name"></organizo-vertical-navigation-spacer-item>
              </ng-container>
            }

          </ng-container>
        }

      </ng-container>
    }

    <!-- Content footer -->
    <div class="organizo-vertical-navigation-content-footer">
      <ng-content select="[organizoVerticalNavigationContentFooter]"></ng-content>
    </div>

  </div>

  <!--  &lt;!&ndash; Footer &ndash;&gt;-->
  <!--  <div class="organizo-vertical-navigation-footer">-->
  <!--    <ng-content select="[organizoVerticalNavigationFooter]"></ng-content>-->
  <!--  </div>-->

</div>

@if (activeAsideItemId) {
  <!-- Aside -->
  <ng-container>
    <div
      [@fadeInLeft]="position === 'left'"
      [@fadeInRight]="position === 'right'"
      [@fadeOutLeft]="position === 'left'"
      [@fadeOutRight]="position === 'right'"
      [organizoScrollbarOptions]="{wheelPropagation: false, suppressScrollX: true}"
      class="organizo-vertical-navigation-aside-wrapper"
      organizoScrollbar>

      <!-- Items -->
      @for (item of navigation; track trackByFn) {
        <ng-container>

          @if ((item.hidden && !item.hidden(item)) || !item.hidden) {
            <!-- Skip the hidden items -->
            <ng-container>

              @if (item.type === 'aside' && item.id === activeAsideItemId) {
                <!-- Aside -->
                <ng-container>
                  <organizo-vertical-navigation-aside-item
                    [autoCollapse]="autoCollapse"
                    [item]="item"
                    [name]="name"></organizo-vertical-navigation-aside-item>
                </ng-container>
              }

            </ng-container>
          }

        </ng-container>
      }

    </div>
  </ng-container>
}
